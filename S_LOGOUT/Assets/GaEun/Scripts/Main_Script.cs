using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;
using UnityEngine.UI;
using TMPro;

public class Main_Script : MonoBehaviour
{
    int index = 0;

    // Main_Scene_GameObjects
    public GameObject splash_Panel;
    public GameObject main_Panel;
    public GameObject alert_Panel;
    public GameObject input_Nickname_Panel;
    public GameObject select_Interest_Panel;
    public GameObject random_Chatting_Explain_Player_Situation_Panel;
    public GameObject game_Explain_Player_Situation_Panel;

    // Look_Around_Scene_GameObjects
    public GameObject look_Around_Panel;
    public GameObject help_Detail_Panel;
    public GameObject show_Card_News_Panel;
    public GameObject show_Game_Final_Ending_Card_News_Panel;
    public GameObject show_Game_Middle_Ending_Card_News_Panel;
    public GameObject show_Random_Chatting_Final_Ending_Card_News_Panel;
    public GameObject show_Random_Chatting_Middle_Ending_Card_News_Panel;
    public GameObject show_Information_Panel;
    public GameObject report_Panel;

    public Image game_Final_Cardnews_Image_View;
    public Image random_Chatting_Final_Cardnews_Image_View;
    public Image middle_Cardnews01_Image_View;
    public Image middle_Cardnews02_Image_View;

    Sprite Current_Cardnews;

    Sprite[] game_Sprites;
    Sprite[] random_Chatting_Sprites;
    Sprite[] middle_Ending01_Sprites;
    Sprite[] middle_Ending02_Sprites;

    // Nickname strings
    public string gameScene_Name;
    public string chatScene_Name;

    public TMP_InputField nickNameField;
    public Text nickname_Text;

    // Start is called before the first frame update
    void Start()
    {
        game_Sprites = Resources.LoadAll<Sprite>("CardNews/Game_Ending");
        random_Chatting_Sprites = Resources.LoadAll<Sprite>("CardNews/Random_Chatting_Ending");
        middle_Ending01_Sprites = Resources.LoadAll<Sprite>("CardNews/Middle_Ending01");
        middle_Ending02_Sprites = Resources.LoadAll<Sprite>("CardNews/Middle_Ending02");

        if (splash_Panel.activeSelf == false)
        {
            // splash_Panel ?????????????????? ?????? ?? splash() ???? ????
            splash_Panel.SetActive(true);
            splash();
        }
        else
        {
            // splash_Panel ???????????????? splash() ???? ???? ????
            splash();
        }


        if (PlayerPrefs.HasKey("nickname"))
        {
            nickname_Text.text = PlayerPrefs.GetString("nickname");
        }
        else
        {
            nickname_Text.text = "???? ?????? ???? ????????.";
        }
    }

    public void splash()
    {
        // 3?????? ?????????? From_Splash_To_Main_Panel?????? ?????? ???? ???? ????
        Invoke("From_Splash_To_Main_Panel", 3f);
    }

    public void From_Splash_To_Main_Panel()
    {
        index = 0;
        // Splash ???????? Main ???????? ?????????? ???? ????
        splash_Panel.gameObject.SetActive(false);
        main_Panel.SetActive(true);
    }

    public void From_Main_To_Alert_Panel()
    {
        // Main ???????? Alert ???????? ?????????? ???? ????
        // Main ???????? ???? ???? ?????? ?????? ??????
        main_Panel.gameObject.SetActive(false);
        alert_Panel.SetActive(true);
    }

    public void From_Main_To_Look_Around_Panel()
    {
        // Main ???????? Look_Around ???????? ?????????? ???? ????
        // Main ???????? ???????? ?????? ?????? ??????
        main_Panel.SetActive(false);
        look_Around_Panel.SetActive(true);
    }

    public void From_Alert_To_Input_Nickname_Panel()
    {
        // Alert ???????? Input_Nickname ???????? ?????????? ???? ????
        // ?????????? ???????? ???????? ???????? ?????? ?????? ???????? ?????????? ???? ???????? ???????? ????
        alert_Panel.gameObject.SetActive(false);
        input_Nickname_Panel.SetActive(true);
    }

    public void From_Input_Nickname_To_Select_Interest_Panel()
    {
        // Input_Nickname ???????? Select_Interest ???????? ?????????? ???? ????
        // ???????? ???? ????(?????? ???? ???? ???? ???? ????), ???????? ????????, ?????? ???? ???????? ???????? ????
        if (nickNameField.text == "") return;

        Save_Nickname();
        input_Nickname_Panel.gameObject.SetActive(false);
        select_Interest_Panel.SetActive(true);
    }

    public void From_Select_Interest_To_Random_Chatting_Explain_Player_Situation_Panel()
    {
        // Select_Interest ???????? Random_Chatting_Explain_Player_Situation ???????? ?????????? ???? ????
        // ???????? ???????????? ??????????, ???????? ???????? ???? ?????? ???? ?????? ?????? ???????? ???????? ????
        select_Interest_Panel.gameObject.SetActive(false);
        random_Chatting_Explain_Player_Situation_Panel.SetActive(true);
    }

    public void From_Select_Interest_To_Game_Explain_Player_Situation_Panel()
    {
        // Select_Interest ???????? Game_Explain_Player_Situation ???????? ?????????? ???? ????
        // ???????? ???????? ??????????, ???? ???????? ???? ?????? ???? ?????? ?????? ???????? ???????? ????
        select_Interest_Panel.gameObject.SetActive(false);
        game_Explain_Player_Situation_Panel.SetActive(true);
    }

    public void ChatGame_Start()
    {
        // RandomChatting ????
        SceneManager.LoadScene(chatScene_Name);
    }

    public void Game_Start()
    {
        // Game ????
        SceneManager.LoadScene(gameScene_Name);
    }

    public void Save_Nickname()
    {
        // ???????? ???????? ????
        // ?????????? ???????? ????(TotalGameManager?? SetNickName())?? ???????? ???? nickname_Text?? ????
        // ???? ???????? ???? ???????? ?????? ???????? ?????? ?? ?????? ??
        TotalGameManager.instance.SetNickName(nickNameField.text);

        if (PlayerPrefs.HasKey("nickname"))
        {
            nickname_Text.text = PlayerPrefs.GetString("nickname");
        }
        else
        {
            nickname_Text.text = "???? ?????? ???? ????????.";
        }
    }

    public void From_Look_Around_To_Help_Detail_Panel()
    {
        // Look_Around ???????? Help_Detail ???????? ?????????? ???? ????
        // ???????? ?????? ???? ?????? ???????? ???????? ?????? ?????? ????
        look_Around_Panel.gameObject.SetActive(false);
        help_Detail_Panel.SetActive(true);
    }

    public void From_Look_Around_To_Show_Information_Panel()
    {
        // Look_Around ???????? Show_Information ???????? ?????????? ???? ????
        // ???????? ?????? ???? ?????? ???????? ???????? ?????? ?????? ????
        look_Around_Panel.gameObject.SetActive(false);
        show_Information_Panel.SetActive(true);
    }

    public void From_Look_Around_To_Show_Card_News_Panel()
    {
        index = 0;
        // Look_Around ???????? Show_Card_News ???????? ?????????? ???? ????
        // ???????? ?????? ???? ?????? ???????? ???????? ???? ?????? ?????? ????
        look_Around_Panel.gameObject.SetActive(false);
        show_Card_News_Panel.SetActive(true);
    }

    public void From_Look_Around_To_Report_Panel()
    {
        // Look_Around ???????? Show_Card_News ???????? ?????????? ???? ????
        // ???????? ?????? ???? ?????? ???????? ???????? ???? ?????? ?????? ????
        look_Around_Panel.gameObject.SetActive(false);
        report_Panel.SetActive(true);
    }

    public void From_Show_Card_News_To_Show_Game_Middle_Ending_Card_News_Panel()
    {
        index = 0;
        // Show_Card_News ???????? Show_Game_Middle_Ending_Card_News ???????? ?????????? ???? ????
        // ???????? ???? ?????? ???? ?????? ???????? ?????? ???? ???? ?????? ?????? ????
        show_Card_News_Panel.gameObject.SetActive(false);
        Current_Cardnews = middle_Ending01_Sprites[index];
        middle_Cardnews01_Image_View.sprite = Current_Cardnews;
        show_Game_Middle_Ending_Card_News_Panel.SetActive(true);
    }

    public void From_Show_Card_News_To_Show_Game_Final_Ending_Card_News_Panel()
    {
        index = 0;
        // Show_Card_News ???????? Show_Game_Final_Ending_Card_News ???????? ?????????? ???? ????
        // ???????? ???? ?????? ???? ?????? ???????? ?????? ???? ???? ?????? ?????? ????
        show_Card_News_Panel.gameObject.SetActive(false);
        Current_Cardnews = game_Sprites[index];
        game_Final_Cardnews_Image_View.sprite = Current_Cardnews;
        show_Game_Final_Ending_Card_News_Panel.SetActive(true);
    }

    public void From_Show_Card_News_To_Show_Random_Chatting_Middle_Ending_Card_News_Panel()
    {
        index = 0;
        // Show_Card_News ???????? Show_Random_Chatting_Middle_Ending_Card_News ???????? ?????????? ???? ????
        // ???????? ???? ?????? ???? ?????? ???????? ?????????? ???? ???? ?????? ?????? ????
        show_Card_News_Panel.gameObject.SetActive(false);
        Current_Cardnews = middle_Ending02_Sprites[index];
        middle_Cardnews02_Image_View.sprite = Current_Cardnews;
        show_Random_Chatting_Middle_Ending_Card_News_Panel.SetActive(true);
    }

    public void From_Show_Card_News_To_Show_Random_Chatting_Final_Ending_Card_News_Panel()
    {
        index = 0;
        // Show_Card_News ???????? Show_Random_Chatting_Final_Ending_Card_News ???????? ?????????? ???? ????
        // ???????? ???? ?????? ???? ?????? ???????? ?????????? ???? ???? ?????? ?????? ????
        show_Card_News_Panel.gameObject.SetActive(false);
        Current_Cardnews = random_Chatting_Sprites[index];
        random_Chatting_Final_Cardnews_Image_View.sprite = Current_Cardnews;
        show_Random_Chatting_Final_Ending_Card_News_Panel.SetActive(true);
    }

    public void Go_Main()
    {
        // Main ???????? ???????? ????
        // ?????????????? ?? ???? ???? ?????? ???????? ??????, Main ?????? ??????
        look_Around_Panel.SetActive(false);
        show_Random_Chatting_Middle_Ending_Card_News_Panel.SetActive(false);
        show_Random_Chatting_Final_Ending_Card_News_Panel.SetActive(false);
        show_Game_Final_Ending_Card_News_Panel.SetActive(false);
        show_Game_Middle_Ending_Card_News_Panel.SetActive(false);

        main_Panel.SetActive(true);
    }

    public void Go_Look_Around()
    {
        // Look_Around ???????? ???????? ????
        // ?????????????? ?? ???? ???? ?????? ???????? ??????, ???????? ???????? ?????????? Look_Around ?????? ??????
        help_Detail_Panel.SetActive(false);
        show_Card_News_Panel.SetActive(false);
        show_Information_Panel.SetActive(false);
        report_Panel.SetActive(false);

        look_Around_Panel.SetActive(true);
    }

    public void Call_Center_01()
    {
        // ?????? ?????? ?????? ???? - 01
        Application.OpenURL("tel:0317561388");

    }

    public void Open_Chat_Profile_01 ()
    {
        Application.OpenURL("http://pf.kakao.com/_FyKxhs");
    }

    public void Call_Center_02()
    {
        // ?????? ?????? ?????? ???? - 02
        Application.OpenURL("tel:0317299360");

    }

    public void Call_Center_03()
    {
        // ?????? ?????? ?????? ???? - 03
        Application.OpenURL("tel:0312151117");

    }

    public void Call_Center_04()
    {
        // ?????? ?????? ?????? ???? - 04
        Application.OpenURL("tel:027358994");

    }

    public void Call_Center_05()
    {
        // ?????? ?????? ?????? ???? - 05
        Application.OpenURL("tel:0317511120");

    }

    public void Open_Article_Site_01()
    {
        // ?????????? ?????? ???? ????
        Application.OpenURL("https://www.bbc.com/korean/news-46148607");
    }

    public void Open_Article_Site_02()
    {
        // ?????????? ?????? ???? ????
        Application.OpenURL("https://news.kbs.co.kr/news/view.do?ncd=4420465");
    }

    public void Open_Article_Site_03()
    {
        // ?????????? ?????? ???? ????
        Application.OpenURL("https://www.womentimes.co.kr/news/articleView.html?idxno=50815");
    }

    public void Open_Article_Site_04()
    {
        // ?????????? ?????? ???? ????
        Application.OpenURL("https://www.sedaily.com/NewsVIew/22L2Y9VAGC");
    }

    public void Open_Article_Site_05()
    {
        // ?????????? ???????? ???? ????
        Application.OpenURL("https://news.lawtalk.co.kr/article/OA9N3VAJUDAX");
    }

    public void Open_Article_Site_06()
    {
        // ?????????? ???????? ???? ????
        Application.OpenURL("http://www.boannews.com/media/view.asp?idx=97821");
    }

    public void Open_Report_Site()
    {
        // ???? ?????? ???? ????
        Application.OpenURL("http://www.safe182.go.kr/index.do");
    }

    public void Show_Previous_CardNews()
    {
        // ???? ?????????? ?????????? ???? ??????
        if (index == 0)
        {
            // index?? 0???? ???? ???? ????
            return;
        }

        // ???? ?????????? ???????? ???? ???? ???? index?? ???????? ???? ???????? ???????? ????
        if (Current_Cardnews == random_Chatting_Sprites[index])
        {
            // index ???? ??????
            index--;
            Current_Cardnews = random_Chatting_Sprites[index];
            random_Chatting_Final_Cardnews_Image_View.sprite = Current_Cardnews;
        }
        else if (Current_Cardnews == game_Sprites[index])
        {
            index--;
            Current_Cardnews = game_Sprites[index];
            game_Final_Cardnews_Image_View.sprite = Current_Cardnews;
        }
        else if (Current_Cardnews == middle_Ending01_Sprites[index])
        {
            index--;
            Current_Cardnews = middle_Ending01_Sprites[index];
            middle_Cardnews01_Image_View.sprite = Current_Cardnews;
        }
        else if (Current_Cardnews == middle_Ending02_Sprites[index])
        {
            index--;
            Current_Cardnews = middle_Ending02_Sprites[index];
            middle_Cardnews02_Image_View.sprite = Current_Cardnews;
        }
    }

    public void Show_Next_CardNews()
    {
        // ???? ?????????? ?????????? ???? ??????
        // ???? ?????????? ???????? ???? ???? ???? index?? ???????? ???? ???????? ???????? ????
        if (Current_Cardnews == random_Chatting_Sprites[index])
        {
            if (index == random_Chatting_Sprites.Length - 1)
            {
                // index?? ???? ???????? ?????? ?????? ???????? ???? ???? ?????? ?????? ???? ???? ????
                return;
            }
            index++;
            Current_Cardnews = random_Chatting_Sprites[index];
            random_Chatting_Final_Cardnews_Image_View.sprite = Current_Cardnews;
        }
        else if (Current_Cardnews == game_Sprites[index])
        {
            if (index == game_Sprites.Length - 1)
            {
                return;
            }
            index++;
            Current_Cardnews = game_Sprites[index];
            game_Final_Cardnews_Image_View.sprite = Current_Cardnews;
        }
        else if (Current_Cardnews == middle_Ending01_Sprites[index])
        {
            if (index == middle_Ending01_Sprites.Length - 1)
            {
                return;
            }
            index++;
            Current_Cardnews = middle_Ending01_Sprites[index];
            middle_Cardnews01_Image_View.sprite = Current_Cardnews;
        }
        else if (Current_Cardnews == middle_Ending02_Sprites[index])
        {
            if (index == middle_Ending02_Sprites.Length - 1)
            {
                return;
            }
            index++;
            Current_Cardnews = middle_Ending02_Sprites[index];
            middle_Cardnews02_Image_View.sprite = Current_Cardnews;
        }
    }
}
